#! /bin/sh

##Set timout of sudo to 0.
sudo echo "Default passwd_timeout=0" >> /etc/sudoers.d/01_no_timeout

##Set dpms off to keep screen on.
xset -dpms

##Enable wired networking.
for devices in $(ip -o link show|grep ether| grep ' UP '| cut -d':' -f2); do nmcli device connect $devices;done

##Set repos to correct sources.
sudo curl https://repogen.simplylinux.ch/txt/xenial/sources_d5ac34000894660acfcd90df104af1f015d54a1d.txt | sudo tee /etc/apt/sources.list

##Update packages and upgrade install hw info tool.
sudo apt update && sudo apt upgrade -y && sudo apt install inxi -y

##Autoinstall proprietary drivers.
sudo ubuntu-drivers autoinstall

##Install xorg and kernel from LTS hardware enablement
sudo apt install --install-recommends -y xserver-xorg-hwe-16.04

#TODO check for wifi flags and make this happen ony when you give a "-w ESSID passphrase"
##Disable eth0 for WiFi testing.
for devices in $(ip -o link show|grep ether| grep ' UP '| cut -d':' -f2); do nmcli device disconnect $devices;done

##Connect to freegeek SSID.
nmcli dev wifi connect 'freegeek2' password '@freegeek'

##Open youtube.com/simonscat in Firefox.
nohup firefox https://www.youtube.com/watch?v=TayIfVa0QPs & sleep 180

##Clean up sudo timeout
sudo rm /etc/sudoers.d/01_no_timeout

##Set dpms back on as normal.
xset +dpms

##Print inxi to thermal for specs.
inxi -bc 0 | lp -d Epson-TM-BA-Thermal

